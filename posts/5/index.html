<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Yous</title><meta name="description" content="Blog for hackers."><link rel="stylesheet" href="/css/main.css"><link rel="canonical" href="https://yous.be/posts/5/"><link rel="alternate" type="application/rss+xml" title="Yous" href="https://yous.be/atom.xml"><link href="/favicon.png" rel="icon"><link href="/apple-touch-icon.png" rel="apple-touch-icon"><link href="/apple-touch-icon-76x76.png" rel="apple-touch-icon" sizes="76x76"><link href="/apple-touch-icon-120x120.png" rel="apple-touch-icon" sizes="120x120"><link href="/apple-touch-icon-152x152.png" rel="apple-touch-icon" sizes="152x152"><link href="/apple-touch-icon-180x180.png" rel="apple-touch-icon" sizes="180x180"><meta property="fb:admins" content="100001802412550"><meta property="og:title" content="Yous"><meta property="og:site_name" content="Yous"><meta property="og:url" content="https://yous.be/posts/5/"><meta property="og:description" content="Blog for hackers."><meta property="og:image" content="http://yous.be/images/about/yous.png"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Yous"><meta name="twitter:description" content="Blog for hackers."><meta name="twitter:image:src" content="http://yous.be/images/about/yous.png"> <script type="text/javascript"> WebFontConfig = { google: { families: [ 'Bitter:400,700,400italic:latin' ] } }; (function() { var wf = document.createElement('script'); wf.src = ('https:' == document.location.protocol ? 'https' : 'http') + '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js'; wf.type = 'text/javascript'; wf.async = 'true'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(wf, s); })(); </script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-43111808-1', 'auto'); ga('send', 'pageview'); </script><body><header class="site-header"><div class="wrapper"> <a class="site-title" href="/">Yous</a><nav class="site-nav"> <a class="page-link" href="/about/">About</a> <a class="page-link" href="/archives/">Archives</a></nav></div></header><div class="page-content"><div class="wrapper"><div class="home"><ul class="post-list"><li><header class="post-header"><h1 class="post-title"> <a class="post-link" href="/2014/05/23/how-to-add-redirects-to-post-url-on-octopress/">How to Add Redirects to Post URL on Octopress</a></h1><p class="post-meta">May 23, 2014 • <a href="/categories/octopress/">Octopress</a></header><div class="post-content"><p>When I write a new post on <a href="http://octopress.org">Octopress</a>, I share the link of it to somewhere doesn’t support <a href="http://en.wikipedia.org/wiki/Hyperlink">hyperlinks</a>. Since people can’t click the link, they should copy and paste or just type it letter by letter. I wanted to make it easier, so I maded short url for every post.<h2><a id="alias-generator-for-posts"></a>Alias Generator for Posts</h2><p>There is a <a href="http://jekyllrb.com">Jekyll</a> plugin that <a href="https://github.com/tsmango/jekyll_alias_generator">generates redirect pages for posts with aliases</a>. Octopress is based on Jekyll and this plugin has no compatibility problem. Its source is on GitHub, so I just added it as submodule:<div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>git submodule add git@github.com:tsmango/jekyll_alias_generator plugins/jekyll_alias_generator
</code></pre></div><p>In your <code class="highlighter-rouge">_config.yml</code>, you may have this line:<div class="language-yaml highlighter-rouge"><pre class="highlight"><code><span class="s">plugins</span><span class="pi">:</span> <span class="s">plugins</span>
</code></pre></div><p>Then it reads <code class="highlighter-rouge">plugins</code> directory and <code class="highlighter-rouge">alias_generator.rb</code> in <code class="highlighter-rouge">plugins/jekyll_alias_generator/_plugins/</code> directory is also loaded, so you can use and manage it!<h2><a id="how-to-use"></a>How to Use</h2><p>This plugin checks <code class="highlighter-rouge">alias</code> inside every post’s YAML Front Matter. Just place the path of the alias:<div class="language-yaml highlighter-rouge"><pre class="highlight"><code><span class="nn">---</span>
<span class="s">layout</span><span class="pi">:</span> <span class="s">post</span>
<span class="s">title</span><span class="pi">:</span> <span class="s2">"</span><span class="s">How</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">Add</span><span class="nv"> </span><span class="s">Redirects</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">Post</span><span class="nv"> </span><span class="s">URL</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">Octopress"</span>
<span class="s">alias</span><span class="pi">:</span> <span class="s">/p/20140523</span>
<span class="nn">---</span>
</code></pre></div><p>Multiple aliases are also available:<div class="language-yaml highlighter-rouge"><pre class="highlight"><code><span class="nn">---</span>
<span class="s">layout</span><span class="pi">:</span> <span class="s">post</span>
<span class="s">title</span><span class="pi">:</span> <span class="s2">"</span><span class="s">How</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">Add</span><span class="nv"> </span><span class="s">Redirects</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">Post</span><span class="nv"> </span><span class="s">URL</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">Octopress"</span>
<span class="s">alias</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">/one-alias/index.html</span><span class="pi">,</span> <span class="nv">/another-alias/index.html</span><span class="pi">]</span>
<span class="nn">---</span>
</code></pre></div><p>When I <code class="highlighter-rouge">rake generate</code>, the plugin generates static html file at <code class="highlighter-rouge">/p/20140523/index.html</code>:<div class="language-html highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"canonical"</span> <span class="na">href=</span><span class="s">"/2014/05/23/how-to-add-redirects-to-post-url-on-octopress/"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"content-type"</span> <span class="na">content=</span><span class="s">"text/html; charset=utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"refresh"</span> <span class="na">content=</span><span class="s">"0;url=/2014/05/23/how-to-add-redirects-to-post-url-on-octopress/"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div><p>When you go to <a href="/p/20140523">/p/20140523</a>, it will redirect here. It also has <a href="http://en.wikipedia.org/wiki/Canonical_link_element">canonical link</a>, so it won’t affect search engine or web analysis services.</div><li><header class="post-header"><h1 class="post-title"> <a class="post-link" href="/2014/05/15/how-to-configure-proguard-using-gradle/">Gradle 환경에서 ProGuard 사용하기</a></h1><p class="post-meta">May 15, 2014 • <a href="/categories/android/">Android</a></header><div class="post-content"><h2><a id="gradle"></a>Gradle</h2><p><img src="/images/2014/05/15/gradle_logo.gif" alt="Gradle" title="Gradle" /><p>최근 <a href="http://developer.android.com/sdk/installing/studio.html">Android Studio</a>를 통해 개발을 진행하게 되면서, 자연스럽게 <a href="http://www.gradle.org">Gradle</a>을 사용하게 되었다. <code class="highlighter-rouge">.gradle</code> 확장자를 가진 파일을 통해 빌드 설정을 자유롭게 조정할 수 있다. 이 글에서는 Gradle을 이용해 배포 APK를 생성하는 방법과 함께 <a href="http://proguard.sourceforge.net">ProGuard</a>를 사용법을 공유하겠다.<h2><a id="how-to-create-release-apk-using-gradle"></a>Gradle 환경에서 배포 APK 생성하기</h2><p>배포 APK에는 서명이 되어 있어야 하는데, 이를 위해서는 keystore 파일과 그 암호, 키 별칭, 키 암호가 필요하다. 디버그 APK에도 서명을 하지만, <a href="http://developer.android.com/tools/publishing/app-signing.html#debugmode">알려진 keystore 암호와 키 별칭, 키 암호</a>를 사용한다. 배포 APK의 서명을 위해 프로젝트의 <code class="highlighter-rouge">build.gradle</code> 파일에 다음 코드를 추가하면 된다.<div class="language-groovy highlighter-rouge"><pre class="highlight"><code><span class="n">android</span> <span class="o">{</span>
    <span class="c1">// ...</span>

    <span class="n">signingConfigs</span> <span class="o">{</span>
        <span class="n">release</span> <span class="o">{</span>
            <span class="n">storeFile</span> <span class="nf">file</span><span class="o">(</span><span class="s2">"YOUR_KEYSTORE_PATH"</span><span class="o">)</span>
            <span class="n">storePassword</span> <span class="s2">"YOUR_KEYSTORE_PASSWORD"</span>
            <span class="n">keyAlias</span> <span class="s2">"YOUR_KEY_ALIAS"</span>
            <span class="n">keyPassword</span> <span class="s2">"YOUR_KEY_PASSWORD"</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="n">buildTypes</span> <span class="o">{</span>
        <span class="n">release</span> <span class="o">{</span>
            <span class="n">signingConfig</span> <span class="n">signingConfigs</span><span class="o">.</span><span class="na">release</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><p>이때 <code class="highlighter-rouge">buildTypes</code> 아래의 <code class="highlighter-rouge">debug</code> 항목은 굳이 명시하지 않아도 <a href="http://tools.android.com/tech-docs/new-build-system/user-guide#TOC-Build-Types">기본적으로 생성</a>되며, 이 <code class="highlighter-rouge">buildType</code>은 <a href="http://tools.android.com/tech-docs/new-build-system/user-guide#TOC-Signing-Configurations">디버그 keystore와 키를 사용하도록 설정</a>되어 있다.<p>다만 이때 <code class="highlighter-rouge">build.gradle</code> 파일에 keystore 암호와 키 암호가 평문으로 들어가게 되는데, 소스를 공개하고 있는 등의 이유로 이를 피하고 싶다면 각각의 항목을 쉘 프롬프트에서 입력받을 수 있다.<div class="language-groovy highlighter-rouge"><pre class="highlight"><code><span class="n">signingConfigs</span> <span class="o">{</span>
    <span class="n">release</span> <span class="o">{</span>
        <span class="n">storeFile</span> <span class="nf">file</span><span class="o">(</span><span class="n">console</span><span class="o">.</span><span class="na">readLine</span><span class="o">(</span><span class="s2">"\n\$ Enter keystore path: "</span><span class="o">))</span>
        <span class="n">storePassword</span> <span class="k">new</span> <span class="nf">String</span><span class="o">(</span><span class="n">console</span><span class="o">.</span><span class="na">readPassword</span><span class="o">(</span><span class="s2">"\n\$ Enter keystore password: "</span><span class="o">))</span>
        <span class="n">keyAlias</span> <span class="n">console</span><span class="o">.</span><span class="na">readLine</span><span class="o">(</span><span class="s2">"\n\$ Enter key alias: "</span><span class="o">)</span>
        <span class="n">keyPassword</span> <span class="k">new</span> <span class="nf">String</span><span class="o">(</span><span class="n">console</span><span class="o">.</span><span class="na">readPassword</span><span class="o">(</span><span class="s2">"\n\$ Enter key password: "</span><span class="o">))</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><p>그러나 이는 <a href="http://stackoverflow.com/questions/18328730/how-to-create-a-release-signed-apk-file-using-gradle#19210105">IDE를 통해 디버그 APK를 생성할 때 크래시</a>를 내며, 이는 그때 코드의 <code class="highlighter-rouge">console</code>이 <code class="highlighter-rouge">null</code>이라서 발생하는 오류다. 이를 해결한 최종 코드는 다음과 같다.<div class="language-groovy highlighter-rouge"><pre class="highlight"><code><span class="n">signingConfigs</span> <span class="o">{</span>
    <span class="n">release</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="n">Console</span> <span class="n">console</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="na">console</span><span class="o">();</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">console</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">storeFile</span> <span class="nf">file</span><span class="o">(</span><span class="n">console</span><span class="o">.</span><span class="na">readLine</span><span class="o">(</span><span class="s2">"\n\$ Enter keystore path: "</span><span class="o">))</span>
            <span class="n">storePassword</span> <span class="k">new</span> <span class="nf">String</span><span class="o">(</span><span class="n">console</span><span class="o">.</span><span class="na">readPassword</span><span class="o">(</span><span class="s2">"\n\$ Enter keystore password: "</span><span class="o">))</span>
            <span class="n">keyAlias</span> <span class="n">console</span><span class="o">.</span><span class="na">readLine</span><span class="o">(</span><span class="s2">"\n\$ Enter key alias: "</span><span class="o">)</span>
            <span class="n">keyPassword</span> <span class="k">new</span> <span class="nf">String</span><span class="o">(</span><span class="n">console</span><span class="o">.</span><span class="na">readPassword</span><span class="o">(</span><span class="s2">"\n\$ Enter key password: "</span><span class="o">))</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><p>디버그 APK와 배포 APK의 패키지 이름이 같으면 APK의 서명이 서로 달라 개발과 디버깅에 어려움이 있다. 이를 해결하기 위해서 <code class="highlighter-rouge">buildTypes</code> 아래에 <code class="highlighter-rouge">debug</code> 항목을 선언하여 디버그 APK의 패키지 이름을 바꿀 수 있고, 추가로 버전명도 바꿀 수 있다.<div class="language-groovy highlighter-rouge"><pre class="highlight"><code><span class="n">buildTypes</span> <span class="o">{</span>
    <span class="n">debug</span> <span class="o">{</span>
        <span class="n">packageNameSuffix</span> <span class="s1">'.debug'</span>
        <span class="n">versionNameSuffix</span> <span class="s1">'-debug'</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><p>이제 터미널에서 다음 명령을 실행하면 디버그 APK와 배포 APK를 각각 얻을 수 있다. 물론 디버그 APK는 IDE로도 생성할 수 있다.<div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>./gradlew assembleDebug
<span class="gp">$ </span>./gradlew assembleRelease
</code></pre></div><p>Gradle은 <a href="http://tools.android.com/tech-docs/new-build-system/user-guide#TOC-Android-tasks">캐멀케이스 단축키를 지원</a>해서 <code class="highlighter-rouge">aR</code>에 해당하는 다른 명령이 없는 한 <code class="highlighter-rouge">assembleRelease</code> 대신 <code class="highlighter-rouge">aR</code>을 사용할 수 있다.</div><p class="post-continue"> <a href="/2014/05/15/how-to-configure-proguard-using-gradle/">Read on &rarr;</a><li><header class="post-header"><h1 class="post-title"> <a class="post-link" href="/2014/05/11/layout-inflation-as-intended/">Layout Inflation as Intended &rarr;</a></h1><p class="post-meta">May 11, 2014 • <a href="/categories/android/">Android</a></header><div class="post-content"><p>안드로이드 개발을 하다 보면 <a href="http://developer.android.com/reference/android/view/LayoutInflater.html">LayoutInflater</a>의 <a href="http://developer.android.com/reference/android/view/LayoutInflater.html#inflate(int,%20android.view.ViewGroup)">inflate(int, ViewGroup)</a>와 <a href="http://developer.android.com/reference/android/view/LayoutInflater.html#inflate(int,%20android.view.ViewGroup,%20boolean)">inflate(int, ViewGroup, boolean)</a>는 꽤 익숙하다. 하지만 다음 두 줄의 코드가 어떻게 다른지 아는 사람은 그리 많지 않을 것 같다. 실제로 <a href="http://tools.android.com/tips/lint">Android Lint</a>는 한쪽 코드는 피하도록 권하고 있다.<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">inflater</span><span class="o">.</span><span class="na">inflate</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">my_layout</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
<span class="n">inflater</span><span class="o">.</span><span class="na">inflate</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">my_layout</span><span class="o">,</span> <span class="n">parent</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
</code></pre></div><p><a href="http://www.doubleencore.com/author/daves/">Dave Smith</a>가 이 두 코드의 비교와 함께, <a href="http://www.doubleencore.com/2013/05/layout-inflation-as-intended/">바른 Layout Inflation 방법</a>에 대해 설명한 글이 있어 소개한다.</div><li><header class="post-header"><h1 class="post-title"> <a class="post-link" href="/2014/04/02/fragment-transaction-and-activity-state-loss/">Fragment Transaction &amp; Activity State Loss &rarr;</a></h1><p class="post-meta">Apr 2, 2014 • <a href="/categories/android/">Android</a></header><div class="post-content"><p><a href="http://developer.android.com/reference/android/support/v4/app/FragmentTransaction.html">FragmentTransaction</a>을 <a href="http://developer.android.com/reference/android/support/v4/app/FragmentTransaction.html#commit()">commit()</a> 했을 때 Activity의 <a href="http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState(android.os.Bundle)">onSaveInstanceState(Bundle)</a>이 실행된 후라면 다음과 같은 에러 메시지를 보게 된다.<div class="highlighter-rouge"><pre class="highlight"><code>java.lang.IllegalStateException: Can not perform this action after onSaveInstanceState
</code></pre></div><p>이 문제의 원인이 무엇인지, 어떻게 이 Exception을 피할지, 그리고 <a href="http://developer.android.com/reference/android/support/v4/app/FragmentTransaction.html#commitAllowingStateLoss()">commitAllowingStateLoss()</a>가 왜 마지막 수단이 되어야 하는지 잘 설명한 글이 있어 소개한다. <a href="http://www.androiddesignpatterns.com/about/">Alex Lockwood</a>가 쓴 <a href="http://www.androiddesignpatterns.com/2013/08/fragment-transaction-commit-state-loss.html">Fragment Transaction과 Activity State Loss</a>에 관한 글이다.</div><li><header class="post-header"><h1 class="post-title"> <a class="post-link" href="/2014/03/31/trailing-whitespace-is-evil-dont-commit-evil-into-your-repo/">Trailing whitespace is evil. Don&#39;t commit evil into your repo. &rarr;</a></h1><p class="post-meta">Mar 31, 2014 • <a href="/categories/git/">Git</a></header><div class="post-content"><p><a href="http://codeimpossible.com/about.html">Jared Barboza</a>가 쓴 <a href="http://codeimpossible.com/2012/04/02/Trailing-whitespace-is-evil-Don-t-commit-evil-into-your-repo-/">줄 끝 공백에 관한 글</a>이다.<blockquote><p><strong>난 최근에 다양한 사람/언어/편집기와 함께 많은 프로젝트를 진행해 왔다. 우리들 대부분은 Git 초보자였고, 각 프로젝트는 줄 끝 공백에 관한 문제가 있었다.</strong></blockquote><p>경력 있는 개발자로만 이루어진 팀이라고 해도 이런 문제는 발생하기 마련이다.<blockquote><p>줄 끝 공백은 당신의 저장소에서 상당히 많은 문제를 일으킬 수 있다. 실제로 바뀐 것은 공백일 뿐인데도 그 줄에 변경 사항이 있다는 잘못된 diff를 만든다.<p>이는 개발 과정에서 나중에 실제 파일의 변경 사항이 무엇이었는지 찾기 불가능하게 만든다. 대부분의 오픈 소스 프로젝트 대표들은 이를 알고 있고, 그들 대부분은 줄 끝 공백을 없애지 않은 풀 리퀘스트를 거절할 것이다.</blockquote><p>이후 글에서는 Visual Studio와 Sublime Text 2에서 줄 끝 공백을 제거하는 방법과 git hook을 통해 커밋에 줄 끝 공백이 포함되지 않도록 하는 방법을 소개하고 있다.<p>나는 Android Studio에서는 파일 저장 시 모든 줄 끝 공백을 지우고, Vim에서는 줄 끝 공백에 하이라이트를 입혀 쓰고 있다.<div class="language-vim highlighter-rouge"><pre class="highlight"><code>highlight ExtraWhitespace ctermbg<span class="p">=</span><span class="k">red</span> guibg<span class="p">=</span><span class="k">red</span>
autocmd <span class="nb">BufWinEnter</span> * <span class="k">match</span> ExtraWhitespace <span class="sr">/\s\+$/</span>
autocmd <span class="nb">InsertEnter</span> * <span class="k">match</span> ExtraWhitespace <span class="sr">//</span>
autocmd <span class="nb">InsertLeave</span> * <span class="k">match</span> ExtraWhitespace <span class="sr">/\s\+$/</span>
<span class="k">if</span> version <span class="p">&gt;=</span> <span class="m">702</span>
  autocmd <span class="nb">BufWinLeave</span> * <span class="k">call</span> clearmatches<span class="p">()</span>
<span class="k">end</span>
</code></pre></div></div></ul><div class="pagination"> <a class="previous" href="/posts/6/">&laquo; Older</a> <a class="next" href="/posts/4/">Newer &raquo;</a></div></div></div></div><footer class="site-footer"><div class="wrapper"><p> Content on this site is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a><br /> &copy; 2013&ndash;2016 - <a href="/about/">Yous</a> - <a href="/atom.xml">RSS</a></div></footer>
